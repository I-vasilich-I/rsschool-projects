(()=>{"use strict";var e={5923:(e,t,r)=>{r.d(t,{Z:()=>H});var n=r(7294);const o=function(e){var t=e.history,r=e.boardSize,o=t[t.length-1].board,a={4:"tile",3:"tile tile--3",5:"tile tile--5",6:"tile tile--6"},c="board".concat(4!==r?" board-".concat(r):""),i=function(e){return e||""};return n.createElement("main",{className:"main"},n.createElement("section",{className:c},o.map((function(e,t){return n.createElement("div",{key:t,className:"".concat(a[r]," tile--").concat(i(e)?i(e):0)},i(e))}))))};var a=r(7168),c=r(2046),i=r(7118),l=r(8884);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){return JSON.parse(localStorage.getItem(e))||null},m=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},f=function(e){var t,r=function(e){if(Array.isArray(e))return s(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=function(e){return e.map((function(e,t){return e?-1:t})).filter((function(e){return-1!==e}))}(e);if(!n.length)return-1;var o,a=Math.floor(Math.random()<.8?2:4);return r[n[(o=n.length,Math.floor(Math.random()*Math.floor(o)))]]=a,r},d=function(e){return f(f(Array(e).fill(0)))};const p=function(e){var t=e.setIsPopUpActive,r=e.bestScore,o=e.boardSize,s=e.history,u=e.setHistory,f=r?r[r.length-1]:0,p=s[s.length-1].score;return n.createElement("header",{className:"header"},n.createElement("div",{className:"header__top"},n.createElement("h2",{className:"logo"},"2048"),n.createElement("div",{className:"score__container"},n.createElement("div",{className:"score"},n.createElement("p",{className:"score__title"},"Score"),n.createElement("p",{className:"score__count"},p)),n.createElement("div",{className:"score"},n.createElement("p",{className:"score__title"},"Best score"),n.createElement("p",{className:"score__count"},f)))),n.createElement("div",{className:"header__bottom"},n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){t(!0)}},n.createElement(l.Z,{fontSize:"inherit"})),n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){u([{board:d(o*o),score:0,win:!1,gameOver:!1}])}},n.createElement(c.Z,{fontSize:"inherit"})),n.createElement("button",{type:"button",className:"button button--nav",onClick:function(){s.length<2||(u(s.slice(0,s.length-1)),m("2048-history",s.slice(0,s.length-1)))}},n.createElement(a.Z,{fontSize:"inherit"})),n.createElement("button",{type:"button",className:"button  button--nav",onClick:function(){document.body.requestFullscreen()}},n.createElement(i.Z,{fontSize:"inherit"}))))};var v=r(9826),b=r(9973),h=r(1673),y=r(9594),g=r(8735);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const S=function(e){var t=e.bestScore,r=e.setBestScore,o=e.boardSize,a=e.history,c=e.setHistory,i=e.setOpenWin,l=e.setOpenLose,s=t[t.length-1]?t[t.length-1]:0,u=a[a.length-1],d=u.board,p=u.score,S=u.win,N=u.gameOver,_=o*o,w=0,A=function(e){var n,o,u,v,b={resultBoard:null,winCheck:null,gameOver:null};if(u=d,e.toString()!==u.toString()){var h=f(e);b.resultBoard=-1!==h?h:e,n=b.resultBoard,(o=(v=n,function(e){if(Array.isArray(e))return E(e)}(v)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(v)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort((function(e,t){return e-t})))[o.length-1]>=64&&!S&&(b.winCheck=!0,i(!0)),P(b.resultBoard)&&(b.gameOver=(N||l(!0),!0)),N||(c(a.concat({board:b.resultBoard||d,score:p+w,win:b.winCheck||S,gameOver:b.gameOver||N})),m("2048-history",a.concat({board:b.resultBoard||d,score:p+w,win:b.winCheck||S,gameOver:b.gameOver||N})))}var y=p+w>s?p+w:null;y&&(r(t.concat(y)),m("bestScore",t.concat(y)))},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.filter((function(e){return!!e}));t&&r.reverse();for(var n=0;n<r.length;n++)if(r[n]===r[n+1]){w+=r[n]+r[n+1];var o=[r[n]+r[n+1],0];r[n]=o[0],r[n+1]=o[1]}for(var a=r.filter((function(e){return!!e}));a.length<e.length;)a.push(0);return t?a.reverse():a},O=function(e,t){return e.filter((function(e,r){return r>=t&&r<t+o}))},z=function(e,t){return e.filter((function(e,r){return(r-t)%o==0}))},Z=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=k(O(d,t),r);n.map((function(r,n){return e[n+t]=r,r}))},I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=k(z(d,t),r);n.map((function(r,n){return e[n*o+t]=r,r}))},C=function(){for(var e=new Array(_),t=0;t<_;t+=o)Z(e,t);A(e)},x=function(){for(var e=new Array(_),t=0;t<_;t+=o)Z(e,t,!0);A(e)},j=function(){for(var e=new Array(_),t=0;t<o;t++)I(e,t);A(e)},B=function(){for(var e=new Array(_),t=0;t<o;t++)I(e,t,!0);A(e)},P=function(e){if(e.filter((function(e){return!e})).length)return!1;for(var t=0;t<_;t+=o)for(var r=O(e,t),n=0;n<r.length-1;n++)if(r[n]===r[n+1])return!1;for(var a=0;a<o;a++)for(var c=z(e,a),i=0;i<c.length-1;i++)if(c[i]===c[i+1])return!1;return!0},U=function(e){e.stopPropagation&&e.stopPropagation(),"ArrowLeft"!==e.code&&"KeyA"!==e.code||C(),"ArrowRight"!==e.code&&"KeyD"!==e.code||x(),"ArrowUp"!==e.code&&"KeyW"!==e.code||j(),"ArrowDown"!==e.code&&"KeyS"!==e.code||B()};return(0,n.useEffect)((function(){return document.addEventListener("keydown",U),function(){document.removeEventListener("keydown",U)}}),["keydown",U]),n.createElement("footer",{className:"footer"},n.createElement("div",{className:"footer__info"},"HOW TO PLAY: Use your arrow keys on keyboard or in app to move the tiles (w,a,s,d works too). Tiles with the same number merge into one when they touch. Add them up to reach 64(2048 hard to test)! You can continue to play after you have reached 64(2048 hard to test)."),n.createElement("div",{className:"footer__bottom"},n.createElement("div",{className:"footer__links"},n.createElement("a",{href:"https://github.com/I-vasilich-I",className:"footer__link",target:"_blank",rel:"noreferrer"},n.createElement("img",{className:"github__logo",src:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",alt:"Oleg Vaskevich"})),n.createElement("a",{href:"https://rs.school/js/",className:"footer__link",target:"_blank",rel:"noreferrer"},n.createElement("img",{src:"https://rs.school/images/rs_school_js.svg",alt:"The Rolling Scopes"}))),n.createElement("button",{type:"button",className:"button button--nav"},n.createElement(g.Z,{fontSize:"inherit"})),n.createElement("div",{className:"button__container"},n.createElement("button",{type:"button",className:"button button--nav item-b",onClick:C},n.createElement(v.Z,{fontSize:"large"})),n.createElement("button",{type:"button",className:"button button--nav item-a",onClick:j},n.createElement(y.Z,{fontSize:"large"})),n.createElement("button",{type:"button",className:"button button--nav item-d",onClick:x},n.createElement(b.Z,{fontSize:"large"})),n.createElement("button",{type:"button",className:"button button--nav item-c",onClick:B},n.createElement(h.Z,{fontSize:"large"})))))};var N=r(1120),_=r(6394),w=r(6775),A=r(4436),k=r(7645),O=(0,N.Z)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,fontSize:"2rem"},label:{fontSize:"2rem"},select:{fontSize:"2rem"},menuItem:{fontSize:"2rem",backgroundColor:"#e0e0e0"},selectEmpty:{marginTop:e.spacing(2)}}}));function z(e){var t=O(),r=e.boardSize,o=e.setBoardSize,a=e.setHistory,c=e.setIsPopUpActive;return(0,n.useEffect)((function(){a([{board:d(r*r),score:0,win:!1,gameOver:!1}]),c(!1)}),[r]),n.createElement("div",null,n.createElement(A.Z,{className:t.formControl},n.createElement(_.Z,{className:t.label,id:"demo-simple-select-label"},"Board size"),n.createElement(k.Z,{className:t.select,labelId:"demo-simple-select-label",id:"demo-simple-select",value:r,onChange:function(e){o(e.target.value)}},n.createElement(w.Z,{className:t.menuItem,value:3},"3x3"),n.createElement(w.Z,{className:t.menuItem,value:4},"4x4"),n.createElement(w.Z,{className:t.menuItem,value:5},"5x5"),n.createElement(w.Z,{className:t.menuItem,value:6},"6x6"))))}const Z=function(e){var t=e.isPopUpActive,r=e.setIsPopUpActive,o=e.bestScore,a=e.boardSize,c=e.setBoardSize,i=e.setHistory,l=t?"popup blackout":"popup popup--hidden",s=o.slice(o.length-10,o.length),u=function(e){"popup blackout"===e.target.className&&r(!1)};return(0,n.useEffect)((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}),["mousedown",u]),n.createElement("div",{className:l},n.createElement("div",{className:"popup__container"},n.createElement(z,{setIsPopUpActive:r,boardSize:a,setBoardSize:c,setHistory:i}),n.createElement("div",{className:"best-score__list"},"Best score:",s.reverse().map((function(e,t){return n.createElement("div",{key:t+1,className:"best-score__item"},n.createElement("div",{className:"best-score__id"},t+1),n.createElement("div",{className:"best-score__score"},e))})))))};var I=r(8715),C=r(7812),x=r(6037),j=r(366),B=(0,N.Z)((function(e){return{root:{width:"80%","& > * + *":{marginTop:e.spacing(2)},position:"absolute",top:0,left:"10%"},alert__text:{fontSize:"3rem",display:"flex",justifyContent:"space-evenly",alignItems:"center"}}}));function P(e){var t=B(),r=e.openWin,o=e.setOpenWin;return n.createElement("div",{className:t.root},n.createElement(x.Z,{in:r},n.createElement(I.Z,{severity:"success",className:t.alert__text,action:n.createElement(C.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){o(!1)}},n.createElement(j.Z,{fontSize:"inherit"}))},"Congrats, you won!")))}function U(e){var t=B(),r=e.openLose,o=e.setOpenLose;return n.createElement("div",{className:t.root},n.createElement(x.Z,{in:r},n.createElement(I.Z,{severity:"error",className:t.alert__text,action:n.createElement(C.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){o(!1)}},n.createElement(j.Z,{fontSize:"inherit"}))},"Sorry, you lose. Better luck next time.")))}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const H=function(){var e=L((0,n.useState)(4),2),t=e[0],r=e[1],a=L((0,n.useState)(u("bestScore")||[0]),2),c=a[0],i=a[1],l=u("2048-history"),s=l&&l[l.length-1].board.length===t*t,m=L((0,n.useState)(l&&s?l:[{board:d(t*t),score:0,win:!1,gameOver:!1}]),2),f=m[0],v=m[1],b=L((0,n.useState)(!1),2),h=b[0],y=b[1],g=L((0,n.useState)(!1),2),E=g[0],N=g[1],_=L((0,n.useState)(!1),2),w=_[0],A=_[1];return n.createElement("div",{className:"App"},n.createElement("h1",{className:"hidden"},"2048"),n.createElement(P,{openWin:E,setOpenWin:N}),n.createElement(U,{openLose:w,setOpenLose:A}),n.createElement(Z,{boardSize:t,setBoardSize:r,setHistory:v,bestScore:c,isPopUpActive:h,setIsPopUpActive:y}),n.createElement(p,{bestScore:c,boardSize:t,setBoardSize:r,history:f,setHistory:v,isPopUpActive:h,setIsPopUpActive:y}),n.createElement(o,{history:f,boardSize:t}),n.createElement(S,{bestScore:c,setBestScore:i,boardSize:t,history:f,setHistory:v,setOpenWin:N,setOpenLose:A}))}}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,r.x=e=>{},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={509:0},t=[[6981,165,674,136,474,686,512,188,899,733,709,984,918,552,363,254,756,653,378,391,164,54,668,977,362,844,659,100,145],[3477,165,674,136,474,686,512,188,899,733,709,984,918,552,363,254,756,653,378,391,164,54,668,977,362,844,659,100,145],[6277,165,674,136,474,686,512,188,899,733,709,984,918,552,363,254,756,653,378,391,164,54,668,977,362,844,659,100,145]],n=e=>{},o=(o,a)=>{for(var c,i,[l,s,u,m]=a,f=0,d=[];f<l.length;f++)i=l[f],r.o(e,i)&&e[i]&&d.push(e[i][0]),e[i]=0;for(c in s)r.o(s,c)&&(r.m[c]=s[c]);for(u&&u(r),o&&o(a);d.length;)d.shift()();return m&&t.push.apply(t,m),n()},a=self.webpackChunkgame=self.webpackChunkgame||[];function c(){for(var n,o=0;o<t.length;o++){for(var a=t[o],c=!0,i=1;i<a.length;i++){var l=a[i];0!==e[l]&&(c=!1)}c&&(t.splice(o--,1),n=r(r.s=a[0]))}return 0===t.length&&(r.x(),r.x=e=>{}),n}a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a));var i=r.x;r.x=()=>(r.x=i||(e=>{}),(n=c)())})(),r.x()})();